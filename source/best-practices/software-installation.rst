软件安装最佳实践
================

软件安装方式
------------

Linux 或 macOS 系统下安装软件通常有如下几种方式：

1. 使用系统自带的应用商店（App Store）在图形界面下安装软件
2. 使用软件包管理器（如 Ubuntu/Debian 的 ``apt``、Fedora 的 ``dnf``，
   或 macOS 的 ``brew``）通过命令行安装官方源提供的软件
3. 使用软件包管理器通过命令行安装第三方源提供的软件
4. 直接下载闭源软件或商业软件提供的二进制包（如 Linux 下的 deb 和 rpm，macOS 下的 dmg）
   进行安装
5. 某个编程语言的包，通常可以使用该编程语言自带的包管理工具进行安装，比如
   Python 编程语言的包管理器 ``conda`` 和 ``pip``
6. 某些软件提供了二进制的压缩包，直接解压放在某个目录，然后修改环境变量
   **PATH** 即可使用
7. 下载软件源码、编译并安装

绝大多数非科研类开源软件都可以通过方式 1—3 安装；多数商业软件
都可以通过方式 1—4 和方式 6 安装；而对于地震学科研软件而言，
则可以通过方式 5（很多地震学软件是用 Python 语言写的，因而可以通过 ``conda``
或 ``pip`` 安装）、方式 6 或方式 7 进行安装。

方式 1—5 会将软件安装到默认的位置，通常用户无法控制也无需关心其具体安装位置。
而对于方式 6 和 7，用户可选择将软件安装到任意位置。为了便于安装与管理科研
相关软件，我们总结了如下最佳实践。

软件安装路径
------------

软件安装相关的路径如下：

- :file:`~/software/`
- :file:`~/opt/`
- :file:`~/src/`
- :file:`~/bin/`
- :file:`/opt/`

软件包
^^^^^^^

软件的原始压缩包可以保存在 :file:`~/software/` 的子目录下, 相当于做一个备份，
如 :file:`~/software/TauP-2.4.5.tgz`\ 。

无需编译软件
^^^^^^^^^^^^

无需编译的软件，可安装在 :file:`~/opt/` 的子目录下，如 :file:`~/opt/TauP`\ 。

需编译软件
^^^^^^^^^^^

需要从源码编译的软件，可将源码目录放在 :file:`~/src/` 的子目录下，如 :file:`~/src/fk`\ 、
:file:`~/src/GMT`\ 、:file:`~/src/distaz`\ 。

若该软件不需安装，则编译链接后生成的可执行文件在该软件目录下或其目录 :file:`bin` 下，
如 :file:`~/src/fk`\ 、:file:`~/src/CPS/bin`\ 。如果该软件只是一个简单的小工具，
比如单个源码文件或单个可执行文件，则可以将生成的可执行文件复制至 :file:`~/bin/` 目录下，
如 :file:`~/bin/distaz`\ 。

若该软件编译后需要安装，可安装在 :file:`~/opt/` 的子目录下，如 :file:`~/opt/GMT`\ 。

闭源或商业软件
^^^^^^^^^^^^^^

大多数闭源软件或商业软件可安装到 :file:`/opt/` 的子目录下，如 Matlab、Intel 编译器等。
一般这也是闭源软件或商业软件的默认安装路径。
