命令行
======

:本节贡献者: |姚家园|\（作者）、
             |田冬冬|\（审稿）
:最近更新日期: 2021-03-01
:预计花费时间: 20 分钟

----

命令行与图形界面
----------------

地震学科研中，大部分时间使用的是命令行界面（**CLI**, **C**\ ommand **L**\ ine **I**\ nterface），
有时也使用图形界面（**GUI**, **G**\ raph **U**\ ser **I**\ nterface）。
命令行基本以操作键盘为主，图形界面一般同时操作鼠标和键盘。图形界面上手简单，
各种常用功能显式可见，但是推荐在日常科研中使用和掌握命令行，原因如下：

- 命令行更加高效。操作键盘比在键盘和鼠标之间来回切换更快
- 命令行操作可编写成脚本，并重复使用，而图形界面下操作重复的时间成本较高
- 命令行有时是唯一的选择。例如，登录远程服务器时，很少有图形化界面可供使用
- 图形界面占用更多的系统资源

近几年，一些图形界面工具发展迅速，有时使用图形界面会更方便。例如，Visual Studio Code
是当前最流行的图形界面编辑器之一，使用其进行编程或编辑文本十分高效。

终端
----

命令行一般需使用终端（Terminal）输入指令。日常使用的终端更确切的称谓应该是终端模拟器（Terminal Emulator）。
在桌面或菜单栏中找到并点击 “Terminal” 图标以启动终端，然后输入命令并按下 :kbd:`Enter` 键即可执行该命令::

   # 使用 echo 命令输出 Hello World~
   $ echo "Hello World~"

   # 使用 exit 命令退出终端
   $ exit

Shell
-----

命令行实际上指的是 Shell（壳），它是一个用于接收键盘输入的命令，然后把命令交给系统执行的程
序。用户通过终端程序输入命令时，其实是在与 Shell 交互，与系统直接交互的是 Shell。因此，
终端和 Shell 都是程序，前者用于输入命令，后者则是接收命令然后交给系统执行。

几乎所有的 Linux 发行版都提供了一个叫 Bash 的 Shell，此外还有 Zsh、csh、ksh 等 Shell。
熟悉 Linux 系统之后，推荐参考\ :doc:`《Zsh 及其配置实践经验》<best-practices/zsh>`\
安装和使用 Zsh。

.. dropdown:: :fa:`exclamation-circle,mr-1` Linux 内核
   :container: + shadow
   :title: bg-info text-white font-weight-bold

   有壳（Shell）必有核（kernel）。kernel 的常用翻译有核、内核、核心等。内核才是操作系
   统本体，是真正负责调度程序、管理硬件的部分。日常所说的 Linux 其实指的是内核。

   我们无法直接使用内核，日常使用的 Linux 操作系统其实是一个包含内核和一批有用程序
   （如 Shell、终端）的集合体，即 Linux 发行版。Linux 发行版本身只是一个套装，把内核
   用不同的程序包装起来。不同发行版的差异体现了他们之间不同的理念。

   `www.kernel.org <https://www.kernel.org/>`__ 网站负责存储和发布内核。使用以下命令
   可以查询当前使用的 kernel 版本号::

       # 不同 Linux 发行版显示略有区别
       $ uname -r
       5.6.19-300.fc32.x86_64

打开终端后，通常会看到类似如下 Shell 提示符::

   [seismo-learn@earth ~] $

上例中的提示符由 seismo-learn（用户名）、@、earth（主机名）、~（家目录）以及美元符号组成。
在不同的 Linux 发行版或不同的用户设置下，该提示符的样式有所不同。

接着就可以在终端中输入各种命令，Shell 会获取命令并交给系统执行::

    # 查看 Shell 变量，即当前 Shell 程序的名字
    [seismo-learn@earth ~] $ echo $SHELL
    /bin/bash

为了简洁，本教程只用最后的 ``$`` 表达 Shell 提示符。

.. tip::

   借助向上向下箭头按键可以获取之前输入的命令。按住鼠标左键并拖动选中文本，或直接双击一个
   单词，就可以拷贝选中的文本或单词。随后按下鼠标中键，就可以粘贴拷贝到光标所在的位置。

   .. table:: 键盘快捷键
      :align: center

      ======================= ================
      按键                     作用
      ======================= ================
      :kbd:`Ctrl` + :kbd:`a`  移动光标到行首
      :kbd:`Ctrl` + :kbd:`e`  移动光标到行尾
      :kbd:`Ctrl` + :kbd:`k`  剪切从光标位置到行尾的文本
      :kbd:`Ctrl` + :kbd:`u`  剪切从光标位置到行首的文本
      :kbd:`Ctrl` + :kbd:`y`  粘贴到光标位置
      :kbd:`Tab`              输入命令后或输入部分命令时自动补全
      ======================= ================
